Turbo Assembler	 Version 4.1	    03/09/21 14:16:01	    Page 1
mkframe.asm



      1	0000			     .model tiny
      2	0000			     .code
      3				     org 100h
      4
      5				     ; Constants ===========================
      6
      7	      =0005		     BASE_NAME_SIZE equ	5
      8	      =0014		     MAX_INP_LEN equ 20
      9	      =0013		     MAX_NUM_LEN equ 19	     ; Maximum is needed for binary number. 16 is for number, 1	is for length
     10							     ;							      1	for 'b'	or  +
     11				     'o' or 'h'
     12							     ;							      1	for '$'
     13
     14	      =000A		     x1	= 10
     15	      =0046		     x2	= 70
     16
     17	      =000A		     y1	= 10
     18	      =0014		     y2	= 20
     19
     20	      =0654		     lu_coord =	(80 * y1 + x1) * 2
     21	      =0C94		     ld_coord =	(80 * y2 + x1) * 2
     22	      =06CC		     ru_coord =	(80 * y1 + x2) * 2
     23	      =0D0C		     rd_coord =	(80 * y2 + x2) * 2
     24
     25
     26	      =B800		     videomem =	0b800h
     27
     28	      =00BA		     vert_side	= 0bah	     ; vertical	side
     29	      =00CD		     horiz_side	= 0cdh	     ; horizontal side
     30
     31	      =00C9		     lu_corn = 0c9h  ; left-up
     32	      =00C8		     ld_corn = 0c8h  ; left-down
     33	      =00BB		     ru_corn = 0bbh  ; right-up
     34	      =00BC		     rd_corn = 0bch  ; right-down
     35
     36	      =0020		     space = 20h     ; free space
     37
     38	      =00B0		     shadow_30 = 0b0h	     ; 30 %
     39	      =00B1		     shadow_50 = 0b1h	     ; 50 %
     40	      =00B2		     shadow_70 = 0b2h	     ; 70 %
     41
     42				     ;======================================
     43
     44
     45
     46	0100			     Start:
     47	0100  B8 4C00			     mov ax, 4c00h
     48	0103  CD 21			     int 21h
     49
     50					     ;========================================
     51					     ; Requires: defined x1, x2, y1, y2
     52					     ;
     53					     ; Returns:	 ----
     54					     ;
     55					     ; Damages:	 ax, bx, cx, es, di
     56					     ;========================================
     57					     global DrawFrame
Turbo Assembler	 Version 4.1	    03/09/21 14:16:01	    Page 2
mkframe.asm



*Warning* mkframe.asm(56) Global type doesn't match symbol type: DRAWFRAME
     58	0105				     DrawFrame proc
     59	0105  BB B800				     mov bx, videomem
     60	0108  8E C3				     mov es, bx			     ; Jump to videosegment
     61
     62	010A  E8 0004				     call ClearFrame
     63	010D  E8 001B				     call DrawBorders
     64
     65	0110  C3			     ret
     66	0111				     endp
     67
     68
     69
     70					     ;========================================
     71					     ; Requires: defined x1, x2, y1, y2
     72					     ;
     73					     ; Returns:	 ----
     74					     ;
     75					     ; Damages:	 ax, bx, cx, es, di
     76					     ;========================================
     77					     global ClearFrame
*Warning* mkframe.asm(76) Global type doesn't match symbol type: CLEARFRAME
     78	0111				     ClearFrame	proc
     79	0111  BF 0654				     mov di, lu_coord	     ; Coordinates of start
     80
     81	0114  B4 00				     mov ah, 00h	     ; Black background
     82	0116  B0 20				     mov al, 20h	     ; Space symbol
     83
     84	0118  B9 000A				     mov cx, y2	- y1
     85
     86	011B					     clear:
     87	011B  8B D9					     mov bx, cx
     88	011D  B9 003C					     mov cx, x2	- x1
     89
     90	0120						     clear_line:
     91	0120  AB						     stosw	     ; mov es:[di], ax / inc di
     92	0121  E2 FD						     loop clear_line
     93
     94	0123  83 C7 28					     add di, (80 - (x2 - x1)) *	2
     95
     96	0126  8B CB					     mov cx, bx
     97	0128  E2 F1					     loop clear
     98
     99	012A  C3			     ret
    100	012B				     endp
    101
    102
    103
    104					     ;========================================
    105					     ; Requires: defined x1, x2, y1, y2
    106					     ;
    107					     ; Returns:	 ----
    108					     ;
    109					     ; Damages:	 ax, bx, cx, es, di
    110					     ;========================================
    111					     global DrawBorders
*Warning* mkframe.asm(110) Global type doesn't match symbol type: DRAWBORDERS
Turbo Assembler	 Version 4.1	    03/09/21 14:16:01	    Page 3
mkframe.asm



    112	012B				     DrawBorders proc
    113	012B  B4 08				     mov ah, 08h     ; Grey on Black background
    114
    115	012D  BF 0654				     mov di, lu_coord
    116	0130  B0 C9				     mov al, lu_corn
    117	0132  AB				     stosw
    118	0133  E8 002A				     call DrawHorizontalBorder
    119
    120	0136  BF 0654				     mov di, lu_coord
    121	0139  81 C7 00A0			     add di, 80*2
    122	013D  E8 0028				     call DrawVerticalBorder
    123
    124	0140  BF 0C94				     mov di, ld_coord
    125	0143  B0 C8				     mov al, ld_corn
    126	0145  AB				     stosw
    127	0146  E8 0017				     call DrawHorizontalBorder
    128
    129	0149  BF 06CC				     mov di, ru_coord
    130	014C  81 C7 00A0			     add di, 80*2
    131	0150  E8 0015				     call DrawVerticalBorder
    132
    133	0153  BF 06CC				     mov di, ru_coord
    134	0156  B0 BB				     mov al, ru_corn
    135	0158  AB				     stosw
    136
    137	0159  BF 0D0C				     mov di, rd_coord
    138	015C  B0 BC				     mov al, rd_corn
    139	015E  AB				     stosw
    140
    141	015F  C3			     ret
    142	0160				     endp
    143
    144
    145
    146					     ;========================================
    147					     ; Requires: defined x1, x2, y1, y2
    148					     ;
    149					     ; Returns:	 ----
    150					     ;
    151					     ; Damages:	 al, cx, di
    152					     ;========================================
    153					     global DrawHorizontalBorder
*Warning* mkframe.asm(152) Global type doesn't match symbol type: DRAWHORIZONTALBORDER
    154	0160				     DrawHorizontalBorder proc
    155	0160  B9 003B				     mov cx, x2	- x1 - 1
    156	0163  B0 CD				     mov al, horiz_side
    157
    158	0165  F3> AB				     rep stosw
    159
    160	0167  C3			     ret
    161	0168				     endp
    162
    163
    164
    165					     ;========================================
    166					     ; Requires: defined x1, x2, y1, y2
    167					     ;
Turbo Assembler	 Version 4.1	    03/09/21 14:16:01	    Page 4
mkframe.asm



    168					     ; Returns:	 ----
    169					     ;
    170					     ; Damages:	 al, cx, di
    171					     ;========================================
    172					     global DrawVerticalBorder
*Warning* mkframe.asm(171) Global type doesn't match symbol type: DRAWVERTICALBORDER
    173	0168				     DrawVerticalBorder	proc
    174	0168  B9 0009				     mov cx, y2	- y1 - 1
    175	016B  B0 BA				     mov al, vert_side
    176
    177	016D				     v_symb:
    178	016D  26: 89 05				     mov es:[di], ax
    179	0170  81 C7 00A0			     add di, 80*2
    180	0174  E2 F7				     loop v_symb
    181
    182	0176  C3			     ret
    183	0177				     endp
    184
    185
    186
    187
    188
    189
    190	0177  14*(??)		     Input:  db	MAX_INP_LEN dup	(?)
    191
    192	018B  13*(??)		     Number: db	MAX_NUM_LEN dup	(?)
    193
    194	019E  62 69 6E 3A 20	     Base_bin: db 'bin:	'
    195
    196	01A3  6F 63 74 3A 20	     Base_oct: db 'oct:	'
    197
    198	01A8  68 65 78 3A 20	     Base_hex: db 'hex:	'
    199
    200				     end Start
Turbo Assembler	 Version 4.1	    03/09/21 14:16:01	    Page 5
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "03/09/21"
??FILENAME			  Text	 "mkframe "
??TIME				  Text	 "14:16:01"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 MKFRAME
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
BASE_BIN			  Near	 DGROUP:019E
BASE_HEX			  Near	 DGROUP:01A8
BASE_NAME_SIZE			  Number 0005
BASE_OCT			  Near	 DGROUP:01A3
CLEAR				  Near	 DGROUP:011B
CLEARFRAME			  Near	 DGROUP:0111
CLEAR_LINE			  Near	 DGROUP:0120
DRAWBORDERS			  Near	 DGROUP:012B
DRAWFRAME			  Near	 DGROUP:0105
DRAWHORIZONTALBORDER		  Near	 DGROUP:0160
DRAWVERTICALBORDER		  Near	 DGROUP:0168
HORIZ_SIDE			  Number 00CD
INPUT				  Near	 DGROUP:0177
LD_COORD			  Number 0C94
LD_CORN				  Number 00C8
LU_COORD			  Number 0654
LU_CORN				  Number 00C9
MAX_INP_LEN			  Number 0014
MAX_NUM_LEN			  Number 0013
NUMBER				  Near	 DGROUP:018B
RD_COORD			  Number 0D0C
RD_CORN				  Number 00BC
RU_COORD			  Number 06CC
RU_CORN				  Number 00BB
SHADOW_30			  Number 00B0
SHADOW_50			  Number 00B1
SHADOW_70			  Number 00B2
SPACE				  Number 0020
START				  Near	 DGROUP:0100
VERT_SIDE			  Number 00BA
VIDEOMEM			  Number B800
V_SYMB				  Near	 DGROUP:016D
X1				  Number 000A
X2				  Number 0046
Y1				  Number 000A
Y2				  Number 0014
Turbo Assembler	 Version 4.1	    03/09/21 14:16:01	    Page 6
Symbol Table




Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  01AD Word	  Public  CODE
Turbo Assembler	 Version 4.1	    03/09/21 14:16:01	    Page 7
Error Summary



*Warning* mkframe.asm(56) Global type doesn't match symbol type: DRAWFRAME
*Warning* mkframe.asm(76) Global type doesn't match symbol type: CLEARFRAME
*Warning* mkframe.asm(110) Global type doesn't match symbol type: DRAWBORDERS
*Warning* mkframe.asm(152) Global type doesn't match symbol type: DRAWHORIZONTALBORDER
*Warning* mkframe.asm(171) Global type doesn't match symbol type: DRAWVERTICALBORDER
